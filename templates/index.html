<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Thought Graph Generator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .main-content {
            padding: 40px;
        }

        .form-section {
            margin-bottom: 30px;
        }

        .section-title {
            font-size: 1.4em;
            color: #333;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid #4facfe;
            display: flex;
            align-items: center;
        }

        .section-title::before {
            content: "‚öôÔ∏è";
            margin-right: 10px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            font-weight: 600;
            color: #555;
            margin-bottom: 5px;
            font-size: 0.9em;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            padding: 12px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 1em;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #4facfe;
            box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.1);
        }

        .range-input {
            position: relative;
        }

        .range-input input[type="range"] {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #e1e5e9;
            outline: none;
            -webkit-appearance: none;
        }

        .range-input input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #4facfe;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .range-value {
            position: absolute;
            top: -30px;
            right: 0;
            background: #4facfe;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8em;
            font-weight: bold;
        }

        .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 10px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            background: #f8f9fa;
            padding: 8px 12px;
            border-radius: 20px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .checkbox-item:hover {
            background: #e9ecef;
        }

        .checkbox-item input[type="checkbox"] {
            margin-right: 8px;
            transform: scale(1.2);
        }

        .checkbox-item input[type="checkbox"]:checked + label {
            color: #4facfe;
            font-weight: 600;
        }

        .preset-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }

        .preset-btn {
            padding: 10px 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .preset-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        .example-inputs {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }

        .example-btn {
            padding: 6px 12px;
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 15px;
            cursor: pointer;
            font-size: 0.8em;
            transition: all 0.3s ease;
        }

        .example-btn:hover {
            background: #4facfe;
            color: white;
            border-color: #4facfe;
        }

        .submit-section {
            text-align: center;
            margin-top: 40px;
            padding-top: 30px;
            border-top: 1px solid #e1e5e9;
        }

        .generate-btn {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2em;
            font-weight: 600;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 16px rgba(79, 172, 254, 0.3);
        }

        .generate-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 24px rgba(79, 172, 254, 0.4);
        }

        .generate-btn:active {
            transform: translateY(-1px);
        }

        .help-text {
            font-size: 0.8em;
            color: #666;
            margin-top: 5px;
            font-style: italic;
        }

        .advanced-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .collapsible {
            cursor: pointer;
            user-select: none;
        }

        .collapsible::after {
            content: " ‚ñº";
            font-size: 0.8em;
            transition: transform 0.3s ease;
        }

        .collapsible.collapsed::after {
            transform: rotate(-90deg);
        }

        .collapsible-content {
            max-height: 1000px;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .collapsible-content.collapsed {
            max-height: 0;
        }

        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .main-content {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üß† Enhanced Thought Graph Generator</h1>
            <p>Professional-grade idea generation, brainstorming, and mind mapping</p>
        </div>

        <div class="main-content">
            <form method="post" action="/generate">
                <!-- Input Section -->
                <div class="form-section">
                    <h2 class="section-title">üí≠ Input & Context</h2>
                    
                    <div class="form-group">
                        <label for="input_text">What would you like to explore?</label>
                        <textarea name="input_text" id="input_text" rows="3" 
                                placeholder="Enter your topic, question, or challenge..." required></textarea>
                        <div class="help-text">Be specific about what you want to brainstorm or analyze</div>
                    </div>

                    <div class="example-inputs">
                        <span style="font-weight: 600; margin-right: 10px;">Quick examples:</span>
                        {% for example in example_inputs %}
                        <button type="button" class="example-btn" onclick="setInput('{{ example }}')">{{ example }}</button>
                        {% endfor %}
                    </div>
                </div>

                <!-- Preset Configurations -->
                <div class="form-section">
                    <h2 class="section-title">üéØ Quick Presets</h2>
                    <div class="preset-buttons">
                        <button type="button" class="preset-btn" onclick="loadPreset('creative_brainstorm')">üé® Creative Brainstorming</button>
                        <button type="button" class="preset-btn" onclick="loadPreset('analytical_deep_dive')">üîç Analytical Deep Dive</button>
                        <button type="button" class="preset-btn" onclick="loadPreset('practical_planning')">üìã Practical Planning</button>
                        <button type="button" class="preset-btn" onclick="loadPreset('exploratory_research')">üåê Exploratory Research</button>
                        <button type="button" class="preset-btn" onclick="loadPreset('critical_analysis')">‚öñÔ∏è Critical Analysis</button>
                    </div>
                </div>

                <!-- Core Parameters -->
                <div class="form-section">
                    <h2 class="section-title">‚öôÔ∏è Core Parameters</h2>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="max_nodes">Maximum Ideas (5-50)</label>
                            <div class="range-input">
                                <input type="range" name="max_nodes" id="max_nodes" min="5" max="50" value="20" 
                                       oninput="updateRangeValue(this, 'max_nodes_value')">
                                <span class="range-value" id="max_nodes_value">20</span>
                            </div>
                            <div class="help-text">How many thoughts to generate</div>
                        </div>

                        <div class="form-group">
                            <label for="max_depth">Thinking Depth (1-10)</label>
                            <div class="range-input">
                                <input type="range" name="max_depth" id="max_depth" min="1" max="10" value="4" 
                                       oninput="updateRangeValue(this, 'max_depth_value')">
                                <span class="range-value" id="max_depth_value">4</span>
                            </div>
                            <div class="help-text">How deep to explore each idea</div>
                        </div>

                        <div class="form-group">
                            <label for="generation_mode">Generation Mode</label>
                            <select name="generation_mode" id="generation_mode">
                                {% for mode in generation_modes %}
                                <option value="{{ mode }}" {% if mode == 'balanced' %}selected{% endif %}>
                                    {{ mode.replace('_', ' ').title() }}
                                </option>
                                {% endfor %}
                            </select>
                            <div class="help-text">Overall approach to idea generation</div>
                        </div>

                        <div class="form-group">
                            <label for="creativity_level">Creativity Level (0.0-1.0)</label>
                            <div class="range-input">
                                <input type="range" name="creativity_level" id="creativity_level" min="0" max="1" step="0.1" value="0.7" 
                                       oninput="updateRangeValue(this, 'creativity_level_value')">
                                <span class="range-value" id="creativity_level_value">0.7</span>
                            </div>
                            <div class="help-text">Balance between creative and structured thinking</div>
                        </div>

                        <div class="form-group">
                            <label for="divergence_factor">Idea Diversity (0.0-1.0)</label>
                            <div class="range-input">
                                <input type="range" name="divergence_factor" id="divergence_factor" min="0" max="1" step="0.1" value="0.6" 
                                       oninput="updateRangeValue(this, 'divergence_factor_value')">
                                <span class="range-value" id="divergence_factor_value">0.6</span>
                            </div>
                            <div class="help-text">How diverse and varied the ideas should be</div>
                        </div>

                        <div class="form-group">
                            <label for="depth_vs_breadth">Depth vs Breadth (0.0-1.0)</label>
                            <div class="range-input">
                                <input type="range" name="depth_vs_breadth" id="depth_vs_breadth" min="0" max="1" step="0.1" value="0.5" 
                                       oninput="updateRangeValue(this, 'depth_vs_breadth_value')">
                                <span class="range-value" id="depth_vs_breadth_value">0.5</span>
                            </div>
                            <div class="help-text">0 = more breadth, 1 = more depth</div>
                        </div>
                    </div>
                </div>

                <!-- Organization & Clustering -->
                <div class="form-section">
                    <h2 class="section-title">üìä Organization & Clustering</h2>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="clustering_method">Clustering Method</label>
                            <select name="clustering_method" id="clustering_method">
                                {% for method in clustering_methods %}
                                <option value="{{ method }}" {% if method == 'semantic' %}selected{% endif %}>
                                    {{ method.replace('_', ' ').title() }}
                                </option>
                                {% endfor %}
                            </select>
                            <div class="help-text">How to group related ideas</div>
                        </div>

                        <div class="form-group">
                            <label for="max_clusters">Maximum Clusters (1-10)</label>
                            <div class="range-input">
                                <input type="range" name="max_clusters" id="max_clusters" min="1" max="10" value="5" 
                                       oninput="updateRangeValue(this, 'max_clusters_value')">
                                <span class="range-value" id="max_clusters_value">5</span>
                            </div>
                            <div class="help-text">Maximum number of idea clusters</div>
                        </div>

                        <div class="form-group">
                            <label for="min_confidence">Minimum Quality (0.0-1.0)</label>
                            <div class="range-input">
                                <input type="range" name="min_confidence" id="min_confidence" min="0" max="1" step="0.1" value="0.3" 
                                       oninput="updateRangeValue(this, 'min_confidence_value')">
                                <span class="range-value" id="min_confidence_value">0.3</span>
                            </div>
                            <div class="help-text">Filter out low-quality ideas</div>
                        </div>
                    </div>
                </div>

                <!-- Context & Domain -->
                <div class="form-section">
                    <h2 class="section-title">üéØ Context & Domain</h2>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="domain_focus">Domain Focus (optional)</label>
                            <input type="text" name="domain_focus" id="domain_focus" 
                                   placeholder="e.g., technology, business, healthcare">
                            <div class="help-text">Specific domain or field to focus on</div>
                        </div>

                        <div class="form-group">
                            <label for="perspective">Perspective (optional)</label>
                            <input type="text" name="perspective" id="perspective" 
                                   placeholder="e.g., user, manager, developer">
                            <div class="help-text">Specific viewpoint or role to consider</div>
                        </div>

                        <div class="form-group">
                            <label for="focus_areas">Focus Areas (comma-separated)</label>
                            <input type="text" name="focus_areas" id="focus_areas" 
                                   placeholder="innovation, implementation, impact">
                            <div class="help-text">Specific areas to emphasize</div>
                        </div>
                    </div>

                    <div class="form-grid">
                        <div class="form-group">
                            <label for="constraints">Constraints (comma-separated)</label>
                            <textarea name="constraints" id="constraints" rows="2" 
                                    placeholder="budget limitations, time constraints, regulatory requirements"></textarea>
                            <div class="help-text">Limitations or restrictions to consider</div>
                        </div>

                        <div class="form-group">
                            <label for="requirements">Requirements (comma-separated)</label>
                            <textarea name="requirements" id="requirements" rows="2" 
                                    placeholder="scalable, cost-effective, user-friendly"></textarea>
                            <div class="help-text">Must-have characteristics or features</div>
                        </div>
                    </div>
                </div>

                <!-- Advanced Features -->
                <div class="form-section advanced-section">
                    <h2 class="section-title collapsible" onclick="toggleCollapsible(this)">üî¨ Advanced Features</h2>
                    
                    <div class="collapsible-content">
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" name="enable_meta_thinking" id="enable_meta_thinking">
                                <label for="enable_meta_thinking">Meta-thinking</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" name="enable_emotional_layer" id="enable_emotional_layer" checked>
                                <label for="enable_emotional_layer">Emotional aspects</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" name="enable_practical_layer" id="enable_practical_layer" checked>
                                <label for="enable_practical_layer">Practical considerations</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" name="enable_risk_analysis" id="enable_risk_analysis">
                                <label for="enable_risk_analysis">Risk analysis</label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Submit Section -->
                <div class="submit-section">
                    <button type="submit" class="generate-btn">üöÄ Generate Thought Graph</button>
                    <div class="help-text" style="margin-top: 15px;">
                        This will create an interactive visualization of your ideas with detailed analysis
                    </div>
                </div>
            </form>
        </div>
    </div>

    <script>
        function updateRangeValue(slider, valueId) {
            document.getElementById(valueId).textContent = slider.value;
        }

        function setInput(text) {
            document.getElementById('input_text').value = text;
        }

        function toggleCollapsible(element) {
            element.classList.toggle('collapsed');
            const content = element.nextElementSibling;
            content.classList.toggle('collapsed');
        }

        async function loadPreset(presetName) {
            try {
                const response = await fetch('/api/presets');
                const presets = await response.json();
                const preset = presets[presetName];
                
                if (preset) {
                    // Apply preset parameters
                    const params = preset.parameters;
                    
                    Object.keys(params).forEach(key => {
                        const element = document.getElementById(key);
                        if (element) {
                            if (element.type === 'checkbox') {
                                element.checked = params[key];
                            } else {
                                element.value = params[key];
                                // Update range value displays
                                if (element.type === 'range') {
                                    const valueId = key + '_value';
                                    const valueElement = document.getElementById(valueId);
                                    if (valueElement) {
                                        valueElement.textContent = params[key];
                                    }
                                }
                            }
                        }
                    });
                    
                    // Show notification
                    showNotification(`Applied preset: ${preset.name}`, 'success');
                }
            } catch (error) {
                console.error('Failed to load preset:', error);
                showNotification('Failed to load preset', 'error');
            }
        }

        function showNotification(message, type) {
            // Simple notification system
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 20px;
                background: ${type === 'success' ? '#4facfe' : '#ff6b6b'};
                color: white;
                border-radius: 8px;
                box-shadow: 0 4px 8px rgba(0,0,0,0.2);
                z-index: 1000;
                font-weight: 600;
                animation: slideIn 0.3s ease;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // Add CSS animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);

        // Initialize range value displays
        document.addEventListener('DOMContentLoaded', function() {
            const ranges = document.querySelectorAll('input[type="range"]');
            ranges.forEach(range => {
                const valueId = range.id + '_value';
                const valueElement = document.getElementById(valueId);
                if (valueElement) {
                    valueElement.textContent = range.value;
                }
            });
        });
    </script>
</body>
</html>